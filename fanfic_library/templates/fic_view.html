{% extends "base.html" %}

{% block title %}{{ fic.title }}{% endblock %}

{% block header %}{{ fic.title }}{% endblock %}

{% block content %}
<article class="fic-container">
    <div class="fic-meta">
        <h3>por <a href="#">{{ fic.author }}</a></h3>
        <p><strong>Fandom:</strong> {{ fic.fandom }}</p>
        <p><strong>Relacionamento:</strong> {{ fic.relationship or 'Geral' }}</p>
        <p><strong>Status:</strong> {{ fic.status }} (Publicada em: {{ fic.date_published }})</p>
        <p><strong>Tags:</strong> <span class="tags">{{ fic.tags or 'Nenhuma' }}</span></p>
        {% if fic.source_url %}
            <p><strong><a href="{{ fic.source_url }}" target="_blank">Ler no AO3</a></strong></p>
        {% endif %}
        
        <h4>Sumário</h4>
        <blockquote class="summary">
            {{ fic.summary | safe }}
        </blockquote>
    </div>

    <div class="user-details">
        <h4>Seus Detalhes</h4>
        <form action="{{ url_for('edit_fic', fic_id=fic.id) }}" method="POST">
            {{ form.csrf_token }}
            <div class="form-group">
                {{ form.date_read.label }}
                {{ form.date_read(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.comment.label }}
                {{ form.comment(class="form-control", rows=3) }}
            </div>
            {{ form.submit(class="btn btn-primary") }}
        </form>
    </div>

    <hr>
    
    <div class="fic-content">
        {{ fic.content | safe }}
    </div>

    <hr>
    <form action="{{ url_for('delete_fic', fic_id=fic.id) }}" method="POST" onsubmit="return confirm('Tem certeza que deseja deletar esta fanfic? Esta ação não pode ser desfeita.');">
        <input type="submit" value="Deletar Fanfic" class="btn btn-danger">
    </form>

</article>
{% endblock %}